<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Edel White - Boas Festas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --swiss-red: #e11d48;
      --swiss-red-dark: #be123c;
      --card-ice: #fafafa;
      --text-main: #111827;
      --text-soft: #4b5563;
      --gold-accent: #d4af37;
      --silver-accent: #94a3b8;
      --border-light: rgba(229, 231, 235, 0.8);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 100% 0%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
        linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
      color: var(--text-main);
      min-height: 100svh;
      overflow: hidden;
      letter-spacing: -0.01em;
    }

    #fireworksCanvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

    .stars {
      position: fixed; inset: 0;
      background-image:
        radial-gradient(2px 2px at 10% 15%, rgba(255, 255, 255, 0.5) 50%, transparent 100%),
        radial-gradient(2px 2px at 90% 25%, rgba(255, 255, 255, 0.4) 50%, transparent 100%),
        radial-gradient(1.5px 1.5px at 30% 70%, rgba(255, 255, 255, 0.3) 50%, transparent 100%),
        radial-gradient(1.5px 1.5px at 70% 90%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
      background-size: 300px 300px;
      opacity: 0.6;
      z-index: 1;
      pointer-events: none;
    }

    .scene-wrapper {
      position: relative;
      z-index: 2;
      width: 100%;
      height: 100svh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    /* ===== ENVELOPE ===== */
    .envelope-container {
      position: relative;
      width: 380px;
      max-width: min(92vw, 420px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
      perspective: 1400px;
      transition: transform 0.8s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.8s ease;
    }

    .envelope-container.opened {
      transform: translateY(80px) scale(0.85);
      opacity: 0;
      pointer-events: none;
    }

    .envelope {
      position: relative;
      width: 100%;
      height: 240px;
      border-radius: 20px;
      background: linear-gradient(145deg, var(--swiss-red), var(--swiss-red-dark));
      box-shadow:
        0 40px 80px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(255, 255, 255, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      overflow: hidden;
      transform-style: preserve-3d;
    }

    .envelope::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 20% 10%, rgba(255, 255, 255, 0.4) 0%, transparent 60%),
        radial-gradient(circle at 80% 15%, rgba(255, 255, 255, 0.3) 0%, transparent 60%);
      mix-blend-mode: overlay;
      pointer-events: none;
    }

    .envelope-paper {
      position: absolute;
      left: 10%;
      right: 10%;
      bottom: 12%;
      height: 50%;
      background: #ffffff;
      border-radius: 12px;
      box-shadow:
        0 10px 30px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.9);
    }

    .envelope-base {
      position: absolute;
      inset: 50% 0 0 0;
      background: linear-gradient(180deg, var(--swiss-red-dark), #9f1239);
    }

    .envelope-flap {
      position: absolute;
      inset: 0 0 45% 0;
      background: linear-gradient(160deg, var(--swiss-red), var(--swiss-red-dark));
      clip-path: polygon(0 0, 50% 60%, 100% 0, 100% 100%, 0 100%);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 0.9s cubic-bezier(0.19, 1, 0.22, 1);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
    }

    .envelope.opened .envelope-flap { transform: rotateX(-180deg); box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3); }

    .swiss-cross {
      position: absolute;
      top: 35%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .swiss-cross::before, .swiss-cross::after {
      content: "";
      position: absolute;
      background: #ffffff;
      border-radius: 2px;
    }

    .swiss-cross::before { width: 70%; height: 20%; top: 40%; left: 15%; }
    .swiss-cross::after  { width: 20%; height: 70%; top: 15%; left: 40%; }

    .envelope-button {
      border: none;
      outline: none;
      padding: 14px 32px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      cursor: pointer;
      background: linear-gradient(135deg, #ffffff, #f8fafc);
      color: var(--swiss-red);
      box-shadow:
        0 15px 35px rgba(0, 0, 0, 0.7),
        0 0 0 1px rgba(255, 255, 255, 0.2);
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .envelope-button::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transition: left 0.7s ease;
    }

    .envelope-button:hover::before { left: 100%; }
    .envelope-button:hover { transform: translateY(-3px); }
    .envelope-button:active { transform: translateY(-1px); }

    /* ===== CARD ===== */
    .card-wrapper {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.6s ease;
      z-index: 3;
    }

    .card-wrapper.visible { opacity: 1; pointer-events: auto; }

    .card {
      position: relative;
      width: min(900px, 94vw);
      max-height: calc(100svh - 40px);
      background: var(--card-ice);
      border-radius: 28px;
      padding: clamp(24px, 3vh, 36px) clamp(28px, 3vw, 44px);
      box-shadow:
        0 50px 100px rgba(2, 6, 23, 0.4),
        0 25px 50px rgba(2, 6, 23, 0.2),
        0 10px 20px rgba(2, 6, 23, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.9),
        inset 0 -1px 0 rgba(2, 6, 23, 0.05);
      border: 1px solid var(--border-light);
      backdrop-filter: blur(20px);
      cursor: default;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 12px;
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
      opacity: 0.5;
      pointer-events: none;
      z-index: 1;
    }

    .card::after {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.9), transparent);
      z-index: 2;
    }

    .card-corner {
      position: absolute;
      width: 120px;
      height: 120px;
      top: -60px;
      right: -60px;
      background: linear-gradient(135deg, var(--swiss-red), transparent 70%);
      opacity: 0.08;
      border-radius: 50%;
      pointer-events: none;
    }

    @media (hover: hover) {
      .card:hover {
        transform: translateY(-5px) scale(1.002);
        box-shadow:
          0 60px 120px rgba(2, 6, 23, 0.45),
          0 30px 60px rgba(2, 6, 23, 0.25),
          0 15px 30px rgba(2, 6, 23, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.9);
      }
    }

    .card-content {
      position: relative;
      z-index: 3;
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 0;
    }

    .year-container { display: flex; justify-content: center; margin-bottom: clamp(20px, 2.5vh, 30px); }
    .year-only { width: min(340px, 80vw); height: auto; filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.15)); border-radius: 12px; transition: transform 0.3s ease; }
    .year-only:hover { transform: scale(1.02); }

    .card-title {
      font-size: clamp(24px, 3vh, 36px);
      line-height: 1.3;
      font-weight: 800;
      margin-bottom: clamp(16px, 2vh, 24px);
      color: var(--text-main);
      text-align: center;
      letter-spacing: -0.02em;
      position: relative;
      padding: 20px 0;
    }

    .title-accent {
      background: linear-gradient(135deg, var(--swiss-red), var(--swiss-red-dark));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position: relative;
      display: inline-block;
      padding: 0 10px;
    }

    .title-accent::before {
      content: attr(data-text);
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.9), transparent);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: shine 10s infinite;
      opacity: 0.8;
    }

    @keyframes shine {
      0% { transform: translateX(-100%) skewX(-15deg); }
      20%, 100% { transform: translateX(100%) skewX(-15deg); }
    }

    .title-accent::after {
      content: "";
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--swiss-red), var(--gold-accent), var(--swiss-red), transparent);
      opacity: 0.8;
      animation: lineGlow 4s infinite;
    }

    @keyframes lineGlow {
      0%, 100% { opacity: 0.5; width: 60%; }
      50% { opacity: 0.9; width: 90%; }
    }

    .card-subtitle {
      font-size: clamp(14px, 1.8vh, 16px);
      color: var(--text-soft);
      margin-bottom: clamp(16px, 2vh, 22px);
      text-align: center;
      line-height: 1.6;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      font-weight: 400;
      padding: 0 20px;
    }

    /* ✅ Ajuste: mensagem com altura controlada para o botão de música sempre aparecer */
    .card-message {
      font-size: clamp(13px, 1.6vh, 15px);
      line-height: 1.7;
      color: var(--text-main);
      overflow-y: auto;
      padding-right: 10px;
      font-weight: 350;
      padding: 0 10px;
      max-height: clamp(160px, 28vh, 320px);
      margin-bottom: 10px;
    }

    .card-message::-webkit-scrollbar { width: 4px; }
    .card-message::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.05); border-radius: 2px; }
    .card-message::-webkit-scrollbar-thumb { background: var(--silver-accent); border-radius: 2px; }
    .card-message strong { color: var(--swiss-red); font-weight: 600; }
    .card-message em { color: var(--text-soft); font-style: italic; }

    .divider {
      height: 1px;
      margin: clamp(16px, 2vh, 22px) 0;
      background: linear-gradient(90deg, transparent, var(--silver-accent), transparent);
      opacity: 0.3;
      position: relative;
    }

    .divider::before {
      content: "✢";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-ice);
      padding: 0 10px;
      color: var(--silver-accent);
      font-size: 12px;
    }

    .signature {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 14px;
      position: relative;
      padding: 0 10px;
    }

    .signature-main {
      font-size: clamp(14px, 1.8vh, 16px);
      font-weight: 700;
      color: var(--swiss-red);
      text-transform: uppercase;
      letter-spacing: 0.2em;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .signature-main::before {
      content: "";
      width: 30px;
      height: 1px;
      background: linear-gradient(90deg, var(--swiss-red), transparent);
    }

    .signature-note {
      font-size: clamp(12px, 1.5vh, 14px);
      color: var(--text-soft);
      line-height: 1.6;
      font-style: italic;
      max-width: 600px;
    }

    /* ✅ Logo no final com destaque premium */
    .brand-container {
      position: relative;
      overflow: hidden;
      border-radius: 18px;
      border: 1px solid rgba(229, 231, 235, 0.95);
      background:
        radial-gradient(circle at 20% 15%, rgba(225, 29, 72, 0.10), transparent 55%),
        linear-gradient(135deg, #ffffff, #f8fafc);
      box-shadow:
        0 18px 45px rgba(0, 0, 0, 0.10),
        0 7px 18px rgba(0, 0, 0, 0.06),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
      padding: 18px 18px;
      margin-top: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .brand-container::after {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle, #ffff, transparent 55%);
      transform: translate(15%, -10%);
      opacity: 0.55;
      pointer-events: none;
    }

    .brand-logo {
      position: relative;
      z-index: 2;
      width: min(700px, 92%);
      height: auto;
      max-height: 240px;
      object-fit: contain;
      filter: drop-shadow(0 10px 18px rgba(2, 6, 23, 0.12));
      transform: translateZ(0);
    }

    /* Música */
    .music-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
      padding: 14px 10px 0;
      margin-top: 10px;
      border-top: 1px solid rgba(229, 231, 235, 0.55);
    }

    .music-button {
      border: none;
      outline: none;
      padding: 12px 24px;
      border-radius: 50px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(135deg, var(--swiss-red), var(--swiss-red-dark));
      color: white;
      box-shadow:
        0 10px 25px rgba(233, 30, 99, 0.3),
        0 5px 10px rgba(233, 30, 99, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      flex: 0 0 auto;
    }

    .music-button:hover { transform: translateY(-2px); }
    .music-button:active { transform: translateY(0); }

    .music-status {
      font-size: 13px;
      color: var(--text-soft);
      text-align: right;
      flex: 1;
      min-width: 160px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 8px;
    }

    .music-status span {
      color: var(--swiss-red);
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .status-indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #dc2626;
      animation: pulse 2s infinite;
    }

    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

    .close-hint {
      position: absolute;
      bottom: 18px;
      right: 18px;
      font-size: 11px;
      color: var(--text-soft);
      opacity: 0.7;
      display: flex;
      align-items: center;
      gap: 6px;
      z-index: 4;
    }

    @media (max-width: 768px) {
      .card { padding: 20px; border-radius: 24px; }
      .card-corner { width: 80px; height: 80px; top: -40px; right: -40px; }
      .year-only { width: min(280px, 85vw); }
      .music-controls { flex-direction: column; align-items: stretch; }
      .music-status { text-align: center; justify-content: center; }
      .brand-logo { max-height: 140px; }
    }

    @media (max-width: 480px) {
      .envelope-container { width: 300px; }
      .envelope { height: 200px; }
      .card { padding: 16px; border-radius: 20px; }
      .year-only { width: 240px; }
      .card-title { font-size: 20px; }
      .card-subtitle { font-size: 13px; padding: 0 10px; }
      .card-message { font-size: 12.5px; padding: 0 5px; }
      .signature, .music-controls { padding-left: 5px; padding-right: 5px; }
    }

    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
    }
  </style>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
</head>

<body>
  <canvas id="fireworksCanvas"></canvas>
  <div class="stars"></div>

  <div class="scene-wrapper">
    <!-- ENVELOPE -->
    <div class="envelope-container" id="envelopeContainer">
      <div class="envelope" id="envelope">
        <div class="envelope-base"></div>
        <div class="envelope-paper"></div>
        <div class="envelope-flap">
          <div class="swiss-cross"></div>
        </div>
      </div>
      <button class="envelope-button" id="openButton">
        <i class="fas fa-envelope-open-text"></i> ABRIR CARTA
      </button>
    </div>

    <!-- CARD -->
    <div class="card-wrapper" id="cardWrapper">
      <div class="card" id="card3D">
        <div class="card-corner"></div>

        <div class="card-content">
          <div class="year-container">
            <img src="IMG/happy2026.png" alt="Feliz 2026" class="year-only" id="happy2026Image">
          </div>

          <h1 class="card-title">
            <span class="title-accent" data-text="Em 2026, a Edel White vem de cara nova.">
              Em 2026, a Edel White vem de cara nova.
            </span>
          </h1>

          <p class="card-subtitle">
            Um novo capítulo: design renovado, novas experiências e novos produtos — com o mesmo padrão suíço que cuida do seu sorriso.
          </p>

          <div class="card-message">
            Neste novo ciclo, apresentamos uma Edel White ainda mais premium: <strong>novas embalagens</strong>, <strong>novos detalhes</strong> e <strong>novidades no portfólio</strong> para elevar sua rotina de cuidados.
            <br><br>
            Nosso compromisso permanece: entregar soluções com excelência e tecnologia, pensadas para a <strong>saúde bucal</strong> e para a <strong>longevidade do seu sorriso</strong> — do jeito suíço: preciso, confiável e feito para durar.
            <br><br>
            <em>Obrigado por fazer parte do nosso ano</em> e por caminhar conosco nessa história. Em 2026, você pode esperar <strong>coisas novas</strong>, experiências ainda mais especiais e um cuidado que acompanha cada fase da sua vida.
            <br><br>
            Desejamos um novo ano repleto de saúde, conquistas e muitos motivos para sorrir com quem você ama.
          </div>

          <div class="divider"></div>

          <div class="signature">
            <div class="signature-main">Edel White Brasil</div>
            <div class="signature-note">
              Com carinho, celebramos sua confiança e seguimos ao seu lado para que cada capítulo do seu ano seja vivido com um sorriso protegido.
            </div>
          </div>

          <!-- ✅ Música (agora garantido que aparece) -->
          <div class="music-controls">
            <button class="music-button" id="musicToggle" type="button">
              <i class="fas fa-music"></i> Tocar música
            </button>
            <div class="music-status" id="musicStatus">
              Música: <span id="statusText">desligada</span>
            </div>
          </div>

          <!-- ✅ Logo no FINAL com destaque -->
          <div class="brand-container" id="brandContainer">
            <img
              class="brand-logo"
              src="img/logo_novo.png"
              alt="Edel White Swiss"
              loading="eager"
              decoding="async"
            />
          </div>

          <div class="close-hint">
            <i class="fas fa-mouse-pointer"></i> Clique fora do cartão para fechar.
          </div>
        </div>
      </div>
    </div>
  </div>

  <audio id="bgMusic" loop>
    <source src="music/celebration.mp3" type="audio/mpeg">
    Seu navegador não suporta o elemento de áudio.
  </audio>

  <script>
    // Abrir envelope e mostrar card
    (function () {
      const envelope = document.getElementById("envelope");
      const envelopeContainer = document.getElementById("envelopeContainer");
      const openBtn = document.getElementById("openButton");
      const cardWrapper = document.getElementById("cardWrapper");
      const card = document.getElementById("card3D");
      let opened = false;

      openBtn.addEventListener("click", () => {
        if (opened) return;
        opened = true;

        envelope.classList.add("opened");
        openBtn.disabled = true;
        openBtn.innerHTML = '<i class="fas fa-check"></i> ABERTO';

        setTimeout(() => {
          envelopeContainer.classList.add("opened");
          cardWrapper.classList.add("visible");
          if (window.startFireworks) window.startFireworks();

          card.style.opacity = '0';
          card.style.transform = 'translateY(30px) scale(0.95)';

          setTimeout(() => {
            card.style.transition = 'opacity 0.6s ease, transform 0.6s cubic-bezier(0.19, 1, 0.22, 1)';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0) scale(1)';
          }, 100);
        }, 700);
      });

      // Fechar card clicando fora
      cardWrapper.addEventListener('click', (e) => {
        if (e.target === cardWrapper) {
          cardWrapper.classList.remove('visible');
          envelopeContainer.classList.remove('opened');
          envelope.classList.remove('opened');
          opened = false;
          openBtn.disabled = false;
          openBtn.innerHTML = '<i class="fas fa-envelope-open-text"></i> ABRIR CARTA';
        }
      });
    })();

    // Controle de música (fallback: oscilador se não tiver MP3)
    (function () {
      const audio = document.getElementById("bgMusic");
      const btn = document.getElementById("musicToggle");
      const statusText = document.getElementById("statusText");
      let isPlaying = false;

      const hasSource = audio.querySelector("source");

      if (!hasSource) {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let source, gainNode;

        function startOscillator() {
          source = audioContext.createOscillator();
          gainNode = audioContext.createGain();
          source.connect(gainNode);
          gainNode.connect(audioContext.destination);

          source.type = "sine";
          source.frequency.value = 440;
          gainNode.gain.setValueAtTime(0.22, audioContext.currentTime);
          source.start();
        }

        function stopOscillator() {
          try { if (source) source.stop(); } catch(e) {}
          source = null;
          gainNode = null;
        }

        btn.addEventListener("click", async (e) => {
          e.stopPropagation();

          if (!isPlaying) {
            if (audioContext.state === "suspended") await audioContext.resume();
            startOscillator();
            isPlaying = true;
            btn.innerHTML = '<i class="fas fa-pause"></i> Pausar música';
            statusText.innerHTML = '<span class="status-indicator"></span> tocando';
          } else {
            stopOscillator();
            isPlaying = false;
            btn.innerHTML = '<i class="fas fa-music"></i> Tocar música';
            statusText.textContent = 'desligada';
          }
        });
      } else {
        btn.addEventListener("click", async (e) => {
          e.stopPropagation();
          try {
            if (!isPlaying) {
              await audio.play();
              isPlaying = true;
              btn.innerHTML = '<i class="fas fa-pause"></i> Pausar música';
              statusText.innerHTML = '<span class="status-indicator"></span> tocando';
            } else {
              audio.pause();
              isPlaying = false;
              btn.innerHTML = '<i class="fas fa-music"></i> Tocar música';
              statusText.textContent = 'desligada';
            }
          } catch (err) {
            console.error("Erro ao reproduzir áudio:", err);
            statusText.textContent = 'erro ao tocar';
          }
        });
      }
    })();

    // Fogos de artifício
    (function () {
      const canvas = document.getElementById("fireworksCanvas");
      const ctx = canvas.getContext("2d");

      let width = window.innerWidth;
      let height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;

      window.addEventListener("resize", () => {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
      });

      const fireworks = [];
      const particles = [];
      let fireworksEnabled = false;

      class Firework {
        constructor(x, y, targetY, color) {
          this.x = x; this.y = y; this.targetY = targetY;
          this.speed = (Math.random() * 3) + 8;
          this.angle = -Math.PI / 2;
          this.vx = Math.cos(this.angle) * this.speed;
          this.vy = Math.sin(this.angle) * this.speed;
          this.color = color;
          this.trail = [];
          this.done = false;
          this.size = Math.random() * 2 + 1.5;
        }
        update() {
          this.trail.push({ x: this.x, y: this.y });
          if (this.trail.length > 12) this.trail.shift();
          this.x += this.vx;
          this.y += this.vy;
          this.vy += 0.05;
          if (this.vy >= 0 || this.y <= this.targetY) {
            this.explode();
            this.done = true;
          }
        }
        explode() {
          const count = 80 + Math.floor(Math.random() * 40);
          for (let i = 0; i < count; i++) {
            const angle = (Math.PI * 2 * i) / count;
            const speed = Math.random() * 3.5 + 2;
            particles.push(new Particle(this.x, this.y, angle, speed, this.color));
          }
        }
        draw() {
          if (this.trail.length > 1) {
            ctx.beginPath();
            ctx.moveTo(this.trail[0].x, this.trail[0].y);
            for (let i = 1; i < this.trail.length; i++) ctx.lineTo(this.trail[i].x, this.trail[i].y);
            ctx.strokeStyle = this.color;
            ctx.lineWidth = this.size;
            ctx.lineCap = 'round';
            ctx.stroke();
          }
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
          ctx.fillStyle = '#ffffff';
          ctx.fill();

          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
        }
      }

      class Particle {
        constructor(x, y, angle, speed, color) {
          this.x = x; this.y = y;
          this.vx = Math.cos(angle) * speed;
          this.vy = Math.sin(angle) * speed;
          this.friction = 0.97;
          this.gravity = 0.08;
          this.color = color;
          this.opacity = 1;
          this.decay = Math.random() * 0.01 + 0.005;
          this.size = Math.random() * 2.2 + 0.8;
          this.wiggle = Math.random() * 0.2 - 0.1;
        }
        update() {
          this.vx *= this.friction;
          this.vy *= this.friction;
          this.vy += this.gravity;
          this.x += this.vx + this.wiggle;
          this.y += this.vy + this.wiggle;
          this.opacity -= this.decay;
        }
        draw() {
          ctx.save();
          ctx.globalAlpha = this.opacity;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size * 0.5, 0, Math.PI * 2);
          ctx.fillStyle = '#ffffff';
          ctx.fill();
          ctx.restore();
        }
      }

      function randomColor() {
        const colors = ["#f97373", "#fed7aa", "#facc15", "#bfdbfe", "#fecaca", "#bbf7d0", "#c4b5fd", "#a5f3fc"];
        return colors[Math.floor(Math.random() * colors.length)];
      }

      let lastLaunch = 0;
      const launchInterval = 450;

      function animate(timestamp) {
        requestAnimationFrame(animate);
        ctx.globalCompositeOperation = "source-over";
        ctx.fillStyle = "rgba(15, 23, 42, 0.1)";
        ctx.fillRect(0, 0, width, height);

        if (!fireworksEnabled) return;

        ctx.globalCompositeOperation = "lighter";

        if (!lastLaunch || timestamp - lastLaunch >= launchInterval) {
          const startX = Math.random() * width;
          const targetY = Math.random() * height * 0.3 + height * 0.1;
          fireworks.push(new Firework(startX, height + 20, targetY, randomColor()));
          lastLaunch = timestamp;
        }

        for (let i = fireworks.length - 1; i >= 0; i--) {
          fireworks[i].update();
          fireworks[i].draw();
          if (fireworks[i].done) fireworks.splice(i, 1);
        }

        for (let i = particles.length - 1; i >= 0; i--) {
          particles[i].update();
          particles[i].draw();
          if (particles[i].opacity <= 0) particles.splice(i, 1);
        }
      }

      requestAnimationFrame(animate);

      window.startFireworks = function () {
        fireworksEnabled = true;
        lastLaunch = 0;
        for (let i = 0; i < 5; i++) {
          setTimeout(() => {
            const startX = Math.random() * width;
            const targetY = Math.random() * height * 0.3 + height * 0.1;
            fireworks.push(new Firework(startX, height + 20, targetY, randomColor()));
          }, i * 100);
        }
      };
    })();
  </script>
</body>
</html>
